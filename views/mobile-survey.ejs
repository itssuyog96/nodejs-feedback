<!DOCTYPE html>

<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->

<head>
    <meta charset="utf-8" />
    <title>FeedBack System | Student</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="" name="description" />
    <meta content="" name="author" />
    <!-- BEGIN LAYOUT FIRST STYLES -->
    <link href="//fonts.googleapis.com/css?family=Oswald:400,300,700" rel="stylesheet" type="text/css" />
    <!-- END LAYOUT FIRST STYLES -->
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />
    <link href="../../stylesheets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="../../stylesheets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />
    <link href="../../stylesheets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="../../stylesheets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css" />
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN THEME GLOBAL STYLES -->
    <link href="../../stylesheets/global/css/components.min.css" rel="stylesheet" id="style_components" type="text/css" />
    <link href="../../stylesheets/global/css/plugins.min.css" rel="stylesheet" type="text/css" />
    <!-- END THEME GLOBAL STYLES -->
    <!-- BEGIN THEME LAYOUT STYLES -->
    <link href="../../stylesheets/layouts/layout5/css/layout.min.css" rel="stylesheet" type="text/css" />
    <link href="../../stylesheets/layouts/layout5/css/custom.min.css" rel="stylesheet" type="text/css" />
    <!-- END THEME LAYOUT STYLES -->
    <link href="../../bower_components/bootstrap-star-rating/css/star-rating.css" rel="stylesheet" type="text/css" />
    <link rel="shortcut icon" href="favicon.ico" /> </head>
<!-- END HEAD -->

<style>
    .form-wizard .steps>li>a.step>.desc,.form-wizard .steps>li>a.step>.number {
        font-size: 15px !important;
    }

</style>


<body class="page-header-fixed page-sidebar-closed-hide-logo">
<!-- BEGIN CONTAINER -->
    <div class="wrapper">
    <!-- BEGIN HEADER -->
    <header class="page-header">
        <nav class="navbar mega-menu" role="navigation">
            <div class="container-fluid">

                <div class="clearfix navbar-fixed-top">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="toggle-icon">
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                    <span class="icon-bar"></span>
                                </span>
                    </button>
                    <!-- End Toggle Button -->
                    <!-- BEGIN LOGO -->
                    <a id="index" class="page-logo" href="http://bvcoenm.org.in/" target="_blank">
                        <img src="../../logo/logo.png" alt="Logo"> </a>
                    <!-- END LOGO -->

                    <!-- BEGIN TOPBAR ACTIONS -->
                    <div class="topbar-actions">
                        <!-- BEGIN USER PROFILE -->
                        <div class="btn-group-img btn-group">
                            <button type="button" class="btn btn-sm md-skip dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
                                <span><%= user.namex %></span>
                                <img src="../../profile/profile.png" alt=""> </button>
                            <ul class="dropdown-menu-v2" role="menu">

                                <li>
                                    <a href="../../logout">
                                        <i class="icon-key"></i> Log Out </a>
                                </li>
                            </ul>
                        </div>
                        <!-- END USER PROFILE -->

                    </div>
                    <!-- END TOPBAR ACTIONS -->
                </div>
            </div>
            <!--/container-->
        </nav>
    </header>
    <!-- END HEADER -->

    <%
        var i = 1;
        var j = 1;
    function ObjectLength( object ) {
        var length = 0;
        for( var key in object ) {
            if( object.hasOwnProperty(key) ) {
                ++length;
            }
        }
        return length;
    }; %>

    <div class="container-fluid">
        <div class="page-content">

            <!-- BEGIN SIDEBAR CONTENT LAYOUT -->
            <div class="page-content-container">
                <div class="page-content-row">
                    <div class="page-content-col feedback-panel">
                        <!-- BEGIN PAGE BASE CONTENT -->

                        <div class="row">
                            <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12">

                                <div class="portlet light wizard" id="form_wizard_1">

                                    <div class="portlet-body form">
                                        <form class="feedback_form" action="#" id="submit_form" method="POST">
                                            <div class="form-wizard">
                                                <div class="form-body">
                                                    <ul class="nav nav-pills nav-justified steps" style="display:none;">
                                                        <% subject.forEach(function(data){ %>
                                                        <% particulars.faculty.questions.forEach(function(ques){ %>
                                                        <li>
                                                            <a href="#tab<%= j %>" data-toggle="tab" class="step">
                                                                <span class="number"><%= j++ %></span>
                                                            </a>
                                                        </li>
                                                        <% }); %>
                                                        <% }); %>
                                                    </ul>
                                                    <div id="bar" class="progress progress-striped" role="progressbar">
                                                        <div class="progress-bar progress-bar-success" ></div>
                                                    </div>

                                                    <input type="hidden" name="col_id" value = "<%= user.col_id %>" />
                                                    <input type="hidden" name="dept_id" value = "<%= user.dep_id %>" />
                                                    <input type="hidden" name="sem" value = "<%= user.sem %>" />
                                                    <input type="hidden" name="survey_id" value="<%= user.survey_id %>" />

                                                    <input type="hidden" name="sub_qty" value="<%= ObjectLength(subject) %>" />

                                                    <div class="tab-content">
                                                        <% subject.forEach(function(data){ %>
                                                        <% particulars.faculty.questions.forEach(function(ques){ %>

                                                        <div align="center" class="tab-pane <% if(i == 1){ %>active<% } %>" id="tab<%= i++; %>">
                                                            <h3 class="block">FACULTY FEEDBACK</h3>
                                                            <div class="feedForm form-group well col-md-12" >
                                                            <div class="col-md-12">
                                                                <h4><%= data.sub_name %></h4>
                                                            </div>
                                                            <hr />
                                                            <div class="col-md-12">
                                                                <span style="font-weight: bolder;"><%= ques.question %></span>
                                                            </div>

                                                            <div class="col-md-12">
                                                                <span>
                                                                    <input id="rate_<%= data.sub_id %>_<%= ques.qid %>" name="rate_<%= data.sub_id %>_<%= ques.qid %>" data-show-clear="false" class="rating rating-loading star-rating-input" data-size="sm" required>
                                                                </span>
                                                            </div>
                                                            </div>
                                                        </div>

                                                        <% }); %>
                                                        <% }); %>

                                                    </div>
                                                    <div align="center" class="form-actions">
                                                        <div class="row">
                                                            <div class=" col-md-12" style="width:100%">
                                                                <a href="javascript:;" class="btn default button-previous">
                                                                    <i class="fa fa-angle-left"></i> Back </a>
                                                                <a href="javascript:;" class="btn btn-outline green button-next"> Continue
                                                                    <i class="fa fa-angle-right"></i>
                                                                </a>
                                                                <a href="javascript:;" class="btn green button-submit"> Submit
                                                                    <i class="fa fa-check"></i>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- END PAGE BASE CONTENT -->
                                                </div>
                                            </div>
                                        </form>

                                    </div>
                                    <!-- END SIDEBAR CONTENT LAYOUT -->

                                </div>
                                <!-- BEGIN FOOTER -->
                                <p class="copyright" style="font-size: smaller; ">
                                    2016 © FeedBack System by the-wire.&nbsp;<a href="https://github.com/THE-WIRE" title="Produced with love" target="_blank">Produced with love</a>
                                </p>
                                <a href="#index" class="go2top">
                                    <i class="icon-arrow-up"></i>
                                </a>
                                <!-- END FOOTER -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <!-- END CONTAINER -->


    <!-- /.modal -->

    <!--[if lt IE 9]>
    <script src="../../javascripts/global/plugins/respond.min.js"></script>
    <script src="../../javascripts/global/plugins/excanvas.min.js"></script>
    <![endif]-->
    <!-- BEGIN CORE PLUGINS -->
    <script src="../../javascripts/global/plugins/jquery.min.js" type="text/javascript"></script>
    <script src="../../javascripts/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="../../javascripts/global/plugins/js.cookie.min.js" type="text/javascript"></script>
    <script src="../../javascripts/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
    <script src="../../javascripts/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
    <script src="../../javascripts/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
    <script src="../../javascripts/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
    <!-- END CORE PLUGINS -->
    <!-- BEGIN THEME GLOBAL SCRIPTS -->
    <script src="../../javascripts/global/scripts/app.min.js" type="text/javascript"></script>
    <!-- END THEME GLOBAL SCRIPTS -->
    <!-- BEGIN THEME LAYOUT SCRIPTS -->
    <script src="../../javascripts/layouts/layout5/scripts/layout.min.js" type="text/javascript"></script>

    <!-- END THEME LAYOUT SCRIPTS -->
    <script src="../../javascripts/global/plugins/select2/js/select2.full.min.js" type="text/javascript"></script>
    <script src="../../javascripts/global/plugins/jquery-validation/js/jquery.validate.min.js" type="text/javascript"></script>
    <script src="../../javascripts/global/plugins/jquery-validation/js/additional-methods.min.js" type="text/javascript"></script>
    <script src="../../javascripts/global/plugins/bootstrap-wizard/jquery.bootstrap.wizard.min.js" type="text/javascript"></script>
    <script src="../../javascripts/global/plugins/bootstrap-wizard/jquery.bootstrap.wizard.min.js" type="text/javascript"></script>
    <script src="../../bower_components/bootstrap-star-rating/js/star-rating.js" type="text/javascript"></script>



    <script>
        $('.star-rating-input').rating({min:0, max:5, step:0.5, size:'xs',starCaptions : {
            0.5: '0.5 : Very Poor',
            1: '1 : Poor',
            1.5: '1.5 : Poor',
            2: '2 : Below Average',
            2.5: '2.5 : Average',
            3: '3 : Can do better',
            3.5: '3.5 : Good',
            4: '4 : Very Good',
            4.5: '4.5 : Excellent',
            5: '5 : Perfect'
        }, starCaptionClasses: {
            0.5: 'label label-danger',
            1: 'label label-danger',
            1.5: 'label label-warning',
            2: 'label label-warning',
            2.5: 'label label-info',
            3: 'label label-info',
            3.5: 'label label-primary',
            4: 'label label-primary',
            4.5: 'label label-success',
            5: 'label label-success'
        }});
    </script>

    <script>
        function submit_rating(){
            console.log($('#submit_form').serialize());
            $.ajax({
                url : '../../ajax/submit',
                data : $('#submit_form').serialize(),
                method : 'POST',
                success:function () {
                    ratingDone();
                    console.log("done");
                }
            });
        }

        function ratingDone(){

            $.ajax({
                url : '../../ajax/done',
                method : 'POST',
                success:function () {
                    console.log("its done you can logout");
                    window.location.replace('/logout');
                }
            });
        }



    </script>

    <script>
        var FormWizard = function () {


            return {
                //main function to initiate the module
                init: function () {
                    if (!jQuery().bootstrapWizard) {
                        return;
                    }

                    function format(state) {
                        if (!state.id) return state.text; // optgroup
                        return "<img class='flag' src='../../assets/global/img/flags/" + state.id.toLowerCase() + ".png'/>&nbsp;&nbsp;" + state.text;
                    }


                    var form = $('#submit_form');
                    var error = $('.alert-danger', form);
                    var success = $('.alert-success', form);

                    form.validate({
                        doNotHideMessage: true, //this option enables to show the error/success messages on tab switch.
                        errorElement: 'span', //default input error message container
                        errorClass: 'help-block help-block-error', // default input error message class
                        focusInvalid: false, // do not focus the last invalid input
//

                        errorPlacement: function (error, element) { // render error placement for each input type
                            if (element.attr("name") == "gender") { // for uniform radio buttons, insert the after the given container
                                error.insertAfter("#form_gender_error");
                            } else if (element.attr("name") == "payment[]") { // for uniform checkboxes, insert the after the given container
                                error.insertAfter("#form_payment_error");
                            } else {
                                error.insertAfter(element); // for other inputs, just perform default behavior
                            }
                        },

                        invalidHandler: function (event, validator) { //display error alert on form submit
                            success.hide();
                            error.show();
                            App.scrollTo(error, -200);
                        },

                        highlight: function (element) { // hightlight error inputs

                        },

                        unhighlight: function (element) { // revert the change done by hightlight

                        },

                        success: function (label) {

                        },

                        submitHandler: function (form) {
                            success.show();
                            error.hide();
                            console.log(form.serialize());
                            $.ajax({
                                url : '../../ajax/submit',
                                data : form.serialize(),
                                method : 'POST',
                                success:function () {
                                    console.log("done");
                                }
                            });
                            //add here some ajax code to submit your form or just call form.submit() if you want to submit the form without ajax
                        }

                    });

                    var displayConfirm = function() {
                        $('#tab<%= j %> .form-control-static', form).each(function(){

                        });
                    }

                    var handleTitle = function(tab, navigation, index) {
                        var total = navigation.find('li').length;
                        var current = index + 1;
                        // set wizard title
                        $('.step-title', $('#form_wizard_1')).text('Step ' + (index + 1) + ' of ' + total);
                        // set done steps
                        jQuery('li', $('#form_wizard_1')).removeClass("done");
                        var li_list = navigation.find('li');
                        for (var i = 0; i < index; i++) {
                            jQuery(li_list[i]).addClass("done");
                        }

                        if (current == 1) {
                            $('#form_wizard_1').find('.button-previous').hide();
                        } else {
                            $('#form_wizard_1').find('.button-previous').show();
                        }

                        if (current >= total) {
                            $('#form_wizard_1').find('.button-next').hide();
                            $('#form_wizard_1').find('.button-submit').show();
                            displayConfirm();
                        } else {
                            $('#form_wizard_1').find('.button-next').show();
                            $('#form_wizard_1').find('.button-submit').hide();
                        }
                        //App.scrollTo($('.page-title'));
                    }

                    // default form wizard
                    $('#form_wizard_1').bootstrapWizard({
                        'nextSelector': '.button-next',
                        'previousSelector': '.button-previous',
                        onTabClick: function (tab, navigation, index, clickedIndex) {
                            return false;

                            success.hide();
                            error.hide();
                            if (form.valid() == false) {
                                return false;
                            }

                            handleTitle(tab, navigation, clickedIndex);
                        },
                        onNext: function (tab, navigation, index) {
                            success.hide();
                            error.hide();

                            if (form.valid() == false) {
                                return false;
                            }

                            handleTitle(tab, navigation, index);
                        },
                        onPrevious: function (tab, navigation, index) {
                            success.hide();
                            error.hide();

                            handleTitle(tab, navigation, index);
                        },
                        onTabShow: function (tab, navigation, index) {
                            var total = navigation.find('li').length;
                            var current = index + 1;
                            var $percent = (current / total) * 100;
                            $('#form_wizard_1').find('.progress-bar').css({
                                width: $percent + '%'
                            });
                        }
                    });

                    $('#form_wizard_1').find('.button-previous').hide();
                    $('#form_wizard_1 .button-submit').click(function () {
                        //
                        submit_rating();

                    }).hide();

                }

            };

        }();

        jQuery(document).ready(function() {
            FormWizard.init();
        });
    </script>

</body>

</html>